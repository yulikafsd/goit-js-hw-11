<!--
Як користуватись галереєю:

НЕСКІНЧЕННИЙ СКРОЛЛ:
0. Вмикаємо нескінченний скрол
1. Вводимо запит
2. Натискаємо кнопку пошуку
3. Скролимо вниз

КНОПКА:
0. Вимикаємо нескінченний скрол, якщо його було увімкнено
1. Вводимо запит
2. Натискаємо кнопку пошуку
3. Скролимо вниз
4. Щоб довантажити нові картинки, натискаємо кнопку пошуку

БАГИ:

1. Якщо плануєте переключати чекбокс, рекомендую це робити перед новим запитом, не під час гортання галереї. При переключенні протягом гортання галереї в режимі нескінченного скролу кнопка з'явиться лише після ще 1 завантаження фото, а в режимі кнопки нескінченний скрол увімкнеться лише після ще 1 натискання кнопки.

Чому так, якщо перевірка чекбокса вісить на скролі, не розумію. Якщо повісити слухача на зміни чекбоксу, можна відобразити кнопку, але ще 1 фетч все-одно запускатиметься. Не вигадала поки що як це пофіксити.

2. При скроллі нескінченної галереї при першому запиті все йде добре і якщо фетчнули та проскролили лише 1 сторінку, також. Але якщо проскролили вже більше 1 сторінки і ми вводимо новий запит без перезавантаження сторінки, то йде фетч 1ї та 2ї сторінки одразу. Завжди тільки 2, незалежно від того, як багато сторінок (головне - більше 1ї) фетчнули.

3. ІНОДІ! На повільній швидкості при швидкому скроллі вниз нескінченний скролл може зробити одразу 2-3 фетчі однієї тієї ж сторінки, а вже потім завантажити наступну. Виходить 12225 (оскільки 2 завантажилось замість 3 та 4, він їх порахував і записав, що тепер до завантаження сторінка номер 5).

Розумію, що або десь невірно рахуються сторінки, або десь не повністю рассинхронізувала функції, але не можу знайти де саме. До того, як знайшла ці баги, в мене лише фетч був асинхронним, тепер вже половина коду, а нічого не змінилось.
-->
